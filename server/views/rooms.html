<!-- Add remove button! -->
<html ng-app="STRooms">
	<head>
		<title>Summit Talks</title>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-58538156-1', 'auto');
		  ga('send', 'pageview');
		</script>
	</head>
	<body>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<link rel="stylesheet" href="/css/rooms.css"></link>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css"></link>
		<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.28/angular.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-route.min.js"></script>
		<script src="/js/rooms.js"></script>
	
		<script>
			var profile =  <%- JSON.stringify(profile) %>;
		</script>

		<div class="wrap">
			<div class="rooms-header">
				<span class="title">
					Summit Talks (<%- version %>)
				</span>
				<div class="user-info">
					<span class="user-info-name"><%- profile.displayName %></span>
					<a href="/auth/logout" class="logout-button"><i class="fa fa-sign-out"></i></a>
				</div>
			</div>
			<div ng-controller="RoomsController" class="rooms-wrap">
				<%if (profile.isTeacher) { %>
						<div class="create-room">
							<input type="text" ng-model="roomDisplayName" placeholder="Give a room name and hit enter" ng-enter="createRoom()" class="create-room-input">
						</div>
				<% } %>
				<div class="rooms-list-header" ng-class="profile.isTeacher? 'rooms-list-header' : 'rooms-list-header rooms-list-header-push'">
					<span class="rooms-list-header-title">Rooms</span>
					<input type="text" placeholder="Search for a room name" class="rooms-list-search-input" ng-model="roomSearchText"></input>
				</div>

				<div class="rooms-list">
					<div class="room-box-container" ng-repeat="room in rooms | filter:roomSearchText">	
						<div ng-click="goToRoom($index)" class='room-box'>
							<img class="avi-room" ng-src={{room.creator.picture}}>
							<div class="room-name-box">
								<span class="room-name">{{room.displayName}}</br><i>{{room.creator.displayName}}</i></span>
							</div>
 							<div class="room-details-box">
								<span class="room-utils">
									<i class="fa fa-users"></i>
									{{room.members.length}}
									<span ng-show="room.creator._id==profile._id">
										<i class="fa fa-button fa-ban" ng-click="muteRoom($event,$index)"></i>
										<i class="fa fa-button fa-trash" ng-click="deleteRoom($event,$index)"></i>
									</span>
								</span>
							</div>
						</div>
					</div>
				</div>

				<div class="announcements-bar">
					<div class="announcements-bar-header">
						<span class="announcements-bar-header-title">Announcements</span>
					</div>
					<div class="announcements-bar-stream">
						<div ng-repeat="announcement in announcements" class="announcement">
							<span class="announcement-text">{{announcement}}</span>
						</div>
					</div>
				</div>

			</div>
		</div>
	</body>
</html>