<!-- Add remove button! -->
<html ng-app="STRooms">
	<head>
		<title>Summit Talks</title>
	</head>
	<body>
		<link rel="stylesheet" href="/css/rooms.css"></link>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css"></link>
		<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.28/angular.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-route.min.js"></script>
		<script src="/js/rooms.js"></script>
	
		<script>
			var profile =  <%- JSON.stringify(profile) %>;
		</script>

		<div class="wrap">
			<div class="rooms-header">
				<span class="title">
					Summit Talks (<%- version %>)
				</span>
				<div class="user-info">
					<span class="user-info-name"><%- profile.displayName %></span>
					<a href="/auth/logout" class="logout-button"><i class="fa fa-sign-out"></i></a>
				</div>
			</div>
			<div ng-controller="RoomsController" class="rooms-wrap">
				<%if (profile.isTeacher) { %>
						<div class="create-room">
							<input type="text" ng-model="roomDisplayName" placeholder="Give a room name and hit enter" ng-enter="createRoom()" class="create-room-input">
						</div>
				<% } %>
				<div class="rooms-list-header" ng-class="profile.isTeacher? 'rooms-list-header' : 'rooms-list-header rooms-list-header-push'">
					<span class="rooms-list-header-title">Rooms</span>
					<input type="text" placeholder="Search for a room name" class="rooms-list-search-input" ng-model="roomSearchText"></input>
				</div>

				<div class="rooms-list">
					<div class="room-box-container" ng-repeat="room in rooms | filter:roomSearchText">	
						<div ng-click="goToRoom($index)" ng-class="profile.isTeacher?'room-box':'room-box room-box-full' ">
							<img class="avi-room" ng-src={{room.creator.picture}}>
							<div class="room-name-box">
								<span class="room-name">{{room.displayName}}</br><i>{{room.creator.displayName}}</i></span>
							</div>
 							<div class="room-details-box">
								<span class="room-count">
									<i class="fa fa-users"></i>
									{{room.members.length}}
								</span>
							</div>
						</div>
						<div class="room-util-box" ng-show="room.creator._id==profile._id">
							<i class="fa fa-button fa-trash" ng-click="deleteRoom($index)"></i>
							<i class="fa fa-button fa-ban" ng-click="muteRoom($index)"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>